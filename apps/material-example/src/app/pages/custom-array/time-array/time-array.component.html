<form class="aff-form-array">
  <ng-container *ngFor="let subForm of formArray.controls; let i = index">
    <ng-container *ngIf="isControl(subForm)">
      <aff-form-control [affArrayIndex]="i"
                        [attr.data-test-id]="'entry-' + i"
                        [control]="$any(subForm)">
      </aff-form-control>
    </ng-container>
    <ng-container *ngIf="isGroup(subForm)">
      <aff-form-group [affArrayIndex]="i"
                      [attr.data-test-id]="'entry-' + i"
                      [formGroup]="$any(subForm)">
      </aff-form-group>
    </ng-container>
  </ng-container>
  <div *ngIf="formArray.controls.length === 0">
    <button (click)="clickAddElement()" color="primary" id="empty-add-button" mat-icon-button>
      <mat-icon>add_circle_outline</mat-icon>
      <span>Add element</span>
    </button>
  </div>
</form>
